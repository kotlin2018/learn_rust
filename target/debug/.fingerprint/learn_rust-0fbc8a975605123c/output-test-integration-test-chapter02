{"message":"`vref` has an anonymous lifetime `'_` but it needs to satisfy a `'static` lifetime requirement","code":{"code":"E0759","explanation":"Return type involving a trait did not require `'static` lifetime.\n\nErroneous code examples:\n\n```compile_fail,E0759\nuse std::fmt::Debug;\n\nfn foo(x: &i32) -> impl Debug { // error!\n    x\n}\n\nfn bar(x: &i32) -> Box<dyn Debug> { // error!\n    Box::new(x)\n}\n```\n\nAdd `'static` requirement to fix them:\n\n```\n# use std::fmt::Debug;\nfn foo(x: &'static i32) -> impl Debug + 'static { // ok!\n    x\n}\n\nfn bar(x: &'static i32) -> Box<dyn Debug + 'static> { // ok!\n    Box::new(x)\n}\n```\n\nBoth [`dyn Trait`] and [`impl Trait`] in return types have an implicit\n`'static` requirement, meaning that the value implementing them that is being\nreturned has to be either a `'static` borrow or an owned value.\n\nIn order to change the requirement from `'static` to be a lifetime derived from\nits arguments, you can add an explicit bound, either to an anonymous lifetime\n`'_` or some appropriate named lifetime.\n\n```\n# use std::fmt::Debug;\nfn foo(x: &i32) -> impl Debug + '_ {\n    x\n}\nfn bar(x: &i32) -> Box<dyn Debug + '_> {\n    Box::new(x)\n}\n```\n\nThese are equivalent to the following explicit lifetime annotations:\n\n```\n# use std::fmt::Debug;\nfn foo<'a>(x: &'a i32) -> impl Debug + 'a {\n    x\n}\nfn bar<'a>(x: &'a i32) -> Box<dyn Debug + 'a> {\n    Box::new(x)\n}\n```\n\n[`dyn Trait`]: https://doc.rust-lang.org/book/ch17-02-trait-objects.html#using-trait-objects-that-allow-for-values-of-different-types\n[`impl Trait`]: https://doc.rust-lang.org/book/ch10-02-traits.html#returning-types-that-implement-traits\n"},"level":"error","spans":[{"file_name":"tests/chapter02.rs","byte_start":2233,"byte_end":2246,"line_start":106,"line_end":106,"column_start":29,"column_end":42,"is_primary":false,"text":[{"text":"        fn inner_func(vref: &mut Vec<u32>){","highlight_start":29,"highlight_end":42}],"label":"this data with an anonymous lifetime `'_`...","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"tests/chapter02.rs","byte_start":2275,"byte_end":2326,"line_start":107,"line_end":109,"column_start":27,"column_end":14,"is_primary":true,"text":[{"text":"            thread::spawn(move||{","highlight_start":27,"highlight_end":34},{"text":"                vref.push(3);","highlight_start":1,"highlight_end":30},{"text":"            });","highlight_start":1,"highlight_end":14}],"label":"...is used here...","suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"...and is required to live as long as `'static` here","code":null,"level":"note","spans":[{"file_name":"tests/chapter02.rs","byte_start":2261,"byte_end":2274,"line_start":107,"line_end":107,"column_start":13,"column_end":26,"is_primary":true,"text":[{"text":"            thread::spawn(move||{","highlight_start":13,"highlight_end":26}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[],"rendered":null},{"message":"`'static` lifetime requirement introduced by this bound","code":null,"level":"note","spans":[{"file_name":"/Users/lo/.rustup/toolchains/stable-x86_64-apple-darwin/lib/rustlib/src/rust/library/std/src/thread/mod.rs","byte_start":23887,"byte_end":23894,"line_start":646,"line_end":646,"column_start":15,"column_end":22,"is_primary":true,"text":[],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror[E0759]\u001b[0m\u001b[0m\u001b[1m: `vref` has an anonymous lifetime `'_` but it needs to satisfy a `'static` lifetime requirement\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mtests/chapter02.rs:107:27\u001b[0m\n\u001b[0m    \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m106\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m| \u001b[0m\u001b[0m  \u001b[0m\u001b[0m        fn inner_func(vref: &mut Vec<u32>){\u001b[0m\n\u001b[0m    \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m| \u001b[0m\u001b[0m                              \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-------------\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12mthis data with an anonymous lifetime `'_`...\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m107\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m| \u001b[0m\u001b[0m  \u001b[0m\u001b[0m            thread::spawn(move||{\u001b[0m\n\u001b[0m    \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m| \u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m___________________________^\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m108\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m| \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m                vref.push(3);\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m109\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m| \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m            });\u001b[0m\n\u001b[0m    \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m| \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|_____________^\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m...is used here...\u001b[0m\n\u001b[0m    \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;10mnote\u001b[0m\u001b[0m: ...and is required to live as long as `'static` here\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mtests/chapter02.rs:107:13\u001b[0m\n\u001b[0m    \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m107\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m| \u001b[0m\u001b[0m            thread::spawn(move||{\u001b[0m\n\u001b[0m    \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m| \u001b[0m\u001b[0m            \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;10m^^^^^^^^^^^^^\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;10mnote\u001b[0m\u001b[0m: `'static` lifetime requirement introduced by this bound\u001b[0m\n\n"}
{"message":"aborting due to previous error","code":null,"level":"error","spans":[],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror\u001b[0m\u001b[0m\u001b[1m: aborting due to previous error\u001b[0m\n\n"}
{"message":"For more information about this error, try `rustc --explain E0759`.","code":null,"level":"failure-note","spans":[],"children":[],"rendered":"\u001b[0m\u001b[1mFor more information about this error, try `rustc --explain E0759`.\u001b[0m\n"}
